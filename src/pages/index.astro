---
import Layout from '../layouts/Layout.astro';

const features = [
	{
		title: "Memory Safe",
		description: "Built with Rust to prevent common bugs like null pointer dereferences and buffer overflows.",
		icon: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12 text-red-500"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z" /></svg>`
	},
	{
		title: "High Performance",
		description: "Zero-cost abstractions ensure bare-metal performance comparable to C/C++.",
		icon: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12 text-red-500"><path stroke-linecap="round" stroke-linejoin="round" d="m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z" /></svg>`
	},
	{
		title: "Custom Bootloader",
		description: "Full control over the boot process with a custom UEFI/BIOS bootloader implementation.",
		icon: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12 text-red-500"><path stroke-linecap="round" stroke-linejoin="round" d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z" /></svg>`
	},
	{
		title: "Networking Stack",
		description: "Complete TCP/IP stack implementation from scratch including Ethernet, ARP, IPv4, ICMP, UDP, and TCP.",
		icon: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12 text-red-500"><path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418" /></svg>`
	},
	{
		title: "Async Concurrency",
		description: "Modern cooperative multitasking using Rust's async/await pattern.",
		icon: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12 text-red-500"><path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" /></svg>`
	},
	{
		title: "Graphics Engine",
		description: "VGA buffer support and custom graphics engine for desktop environment.",
		icon: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12 text-red-500"><path stroke-linecap="round" stroke-linejoin="round" d="M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25" /></svg>`
	}
];
---

<Layout title="Rustrial OS - The Modern Rust Operating System">
	<main class="flex flex-col items-center overflow-x-hidden">
		<!-- Hero Section -->
		<section class="min-h-screen flex flex-col justify-center items-center text-center px-4 relative w-full overflow-hidden">
			<div class="absolute inset-0 overflow-hidden" style="z-index: -1;">
				<!-- Background Image with Overlay -->
				<div class="absolute inset-0 bg-cover bg-center" style="background-image: url('/banner.jpg'); opacity: 0.5;"></div>
				<div class="absolute inset-0 bg-gradient-to-b from-black/50 via-black/30 to-black/80"></div>
				<div class="absolute top-[-50%] left-[-50%] w-[200%] h-[200%] bg-[radial-gradient(circle_at_center,rgba(220,38,38,0.15)_0%,transparent_50%)] animate-pulse"></div>
			</div>
			
			<h1 class="text-6xl md:text-9xl font-black mb-6 tracking-tight leading-none animate-fade-in-up">
				RUSTRIAL <span class="text-red-600">OS</span>
			</h1>
			
			<p class="text-xl md:text-3xl text-gray-400 max-w-3xl mb-12 animate-fade-in-up animation-delay-200">
				A strictly hobbyist x86-64 bare-metal operating system kernel written in Rust. <br/>
				<span class="text-red-500 font-bold">Code Safe. Run Fast.</span>
			</p>
			
			<div class="flex flex-col md:flex-row gap-6 animate-fade-in-up animation-delay-400">
				<a href="https://github.com/lazzerex/rustrial-os/releases" class="group relative px-8 py-4 bg-red-600 text-white font-bold text-lg rounded-full overflow-hidden transition-transform hover:scale-105">
					<span class="relative z-10">Download ISO</span>
					<div class="absolute inset-0 bg-red-700 opacity-0 group-hover:opacity-100 transition-opacity"></div>
				</a>
				<a href="https://github.com/lazzerex/rustrial-os" target="_blank" class="px-8 py-4 bg-transparent border-2 border-white/20 text-white font-bold text-lg rounded-full hover:bg-white/10 transition-colors hover:border-white">
					View Source
				</a>
			</div>
			
			<div class="mt-20 flex gap-12 text-gray-500 animate-fade-in-up animation-delay-400">
				<div class="flex flex-col items-center">
					<span class="text-3xl font-bold text-white mb-1">100%</span>
					<span class="text-sm uppercase tracking-wider">Rust</span>
				</div>
				<div class="flex flex-col items-center">
					<span class="text-3xl font-bold text-white mb-1">0%</span>
					<span class="text-sm uppercase tracking-wider">Runtime Overhead</span>
				</div>
				<div class="flex flex-col items-center">
					<span class="text-3xl font-bold text-white mb-1">MIT</span>
					<span class="text-sm uppercase tracking-wider">Open Source</span>
				</div>
			</div>
		</section>

		<!-- Marquee Banner -->
		<div class="w-full bg-red-900/10 border-y border-red-900/20 overflow-hidden py-12 mb-20 relative">
			<div class="flex whitespace-nowrap overflow-hidden">
				<div class="animate-marquee flex gap-12 pr-12 text-red-500/90 font-black font-mono tracking-widest uppercase text-4xl">
					<span>Memory Safety</span>
					<span class="text-white/20">/</span>
					<span>Bare Metal</span>
					<span class="text-white/20">/</span>
					<span>Async Await</span>
					<span class="text-white/20">/</span>
					<span>Custom Bootloader</span>
					<span class="text-white/20">/</span>
					<span>Networking</span>
					<span class="text-white/20">/</span>
					<span>No STD</span>
					<span class="text-white/20">/</span>
					<span>x86_64</span>
					<span class="text-white/20">/</span>
					<span>POSIX Compliant</span>
					<span class="text-white/20">/</span>
				</div>
				<div class="animate-marquee flex gap-12 pr-12 text-red-500/90 font-black font-mono tracking-widest uppercase text-4xl" aria-hidden="true">
					<span>Memory Safety</span>
					<span class="text-white/20">/</span>
					<span>Bare Metal</span>
					<span class="text-white/20">/</span>
					<span>Async Await</span>
					<span class="text-white/20">/</span>
					<span>Custom Bootloader</span>
					<span class="text-white/20">/</span>
					<span>Networking</span>
					<span class="text-white/20">/</span>
					<span>No STD</span>
					<span class="text-white/20">/</span>
					<span>x86_64</span>
					<span class="text-white/20">/</span>
					<span>POSIX Compliant</span>
					<span class="text-white/20">/</span>
				</div>
			</div>
		</div>

		<!-- About Section -->
		<section class="max-w-4xl px-6 w-full mb-32 text-center">
			<h2 class="text-3xl md:text-4xl font-bold mb-8">Why <span class="text-red-600">Rustrial OS?</span></h2>
			<p class="text-lg text-gray-300 leading-relaxed mb-8">
				Rustrial OS is built from the ground up to demonstrate how modern language features can be applied to low-level systems programming. 
				By leveraging Rust's ownership model, we achieve memory safety without a garbage collector, ensuring predictable performance suitable for real-time applications.
			</p>
			<div class="h-px w-24 bg-red-600 mx-auto"></div>
		</section>

		<!-- Features Grid -->
		<section class="max-w-7xl px-6 w-full mb-32">
			<h2 class="text-4xl md:text-5xl font-bold mb-16 text-center">Core <span class="text-red-600">Features</span></h2>
			<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
				{features.map(feature => (
					<div class="p-8 rounded-2xl bg-neutral-900/50 border border-white/10 hover:border-red-500/50 transition-colors group">
						<div class="mb-6 group-hover:scale-110 transition-transform duration-300" set:html={feature.icon} />
						<h3 class="text-2xl font-bold mb-4 font-mono">{feature.title}</h3>
						<p class="text-gray-400 leading-relaxed">
							{feature.description}
						</p>
					</div>
				))}
			</div>
		</section>

		<!-- Interactive Terminal Section -->
		<section class="max-w-6xl w-full px-6 mb-32 flex flex-col md:flex-row items-center gap-12">
			<div class="w-full md:w-1/2">
				<h2 class="text-4xl font-bold mb-6">Rustrial <span class="text-red-600">Script</span></h2>
				<p class="text-xl text-gray-400 mb-8">
					Includes a custom scripting language for userspace applications. 
					Write powerful scripts with a familiar syntax, interpreted directly by the kernel.
				</p>
				<ul class="space-y-4 mb-8">
					<li class="flex items-center text-gray-300">
						<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" class="w-5 h-5 text-red-500 mr-3"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" /></svg>
						Interpreted Language
					</li>
					<li class="flex items-center text-gray-300">
						<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" class="w-5 h-5 text-red-500 mr-3"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" /></svg>
						Python-like Syntax
					</li>
					<li class="flex items-center text-gray-300">
						<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" class="w-5 h-5 text-red-500 mr-3"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" /></svg>
						Built-in Shell Integration
					</li>
				</ul>
				<a href="#" class="text-red-500 hover:text-red-400 font-bold underline decoration-2 underline-offset-4">Read the Docs →</a>
			</div>
			
			<div class="w-full md:w-1/2 bg-[#1e1e1e] rounded-xl overflow-hidden shadow-2xl border border-gray-800">
				<div class="bg-[#2d2d2d] px-4 py-2 flex gap-2 border-b border-gray-700">
					<div class="w-3 h-3 rounded-full bg-red-500"></div>
					<div class="w-3 h-3 rounded-full bg-yellow-500"></div>
					<div class="w-3 h-3 rounded-full bg-green-500"></div>
					<div class="ml-auto text-xs text-gray-400 font-mono">user@rustrial-os:~</div>
				</div>
				<div class="p-6 font-mono text-sm md:text-base overflow-x-auto min-h-[300px] flex flex-col" id="terminal-content">
					<!-- Interactive content injected via script -->
					<div class="text-gray-400 mb-2">Welcome to Rustrial OS Terminal Interactive Demo</div>
					<div class="text-gray-400 mb-4">Type 'help' for available commands.</div>
					
					<div id="terminal-history"></div>
					
					<div class="flex">
						<span class="text-green-400 mr-2">➜</span>
						<span class="text-blue-400 mr-2">~</span>
						<input type="text" id="terminal-input" class="bg-transparent border-none outline-none text-white w-full font-mono" autocomplete="off" spellcheck="false" />
					</div>
				</div>
			</div>
		</section>

		<!-- Architecture Section -->
		<section class="max-w-7xl w-full px-6 mb-32">
			<h2 class="text-4xl md:text-5xl font-bold mb-16 text-center">System <span class="text-red-600">Architecture</span></h2>
			<div class="relative p-1 rounded-3xl bg-gradient-to-b from-neutral-800 to-black">
				<div class="bg-black rounded-[22px] p-8 md:p-12 overflow-hidden relative">
					<div class="absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_top_right,rgba(220,38,38,0.1)_0%,transparent_60%)]"></div>
					
					<div class="grid grid-cols-1 md:grid-cols-3 gap-6 relative z-10">
						<!-- User Space -->
						<div class="md:col-span-3 bg-neutral-900/50 border border-neutral-700 rounded-xl p-6 text-center hover:border-red-500/30 transition-colors">
							<h3 class="text-xl font-bold mb-2">User Space</h3>
							<div class="flex justify-center gap-4 flex-wrap">
								<span class="px-3 py-1 bg-neutral-800 rounded text-sm text-gray-300">Shell</span>
								<span class="px-3 py-1 bg-neutral-800 rounded text-sm text-gray-300">Rustrial Script VM</span>
								<span class="px-3 py-1 bg-neutral-800 rounded text-sm text-gray-300">Applications</span>
							</div>
						</div>
						
						<!-- Syscall Interface -->
						<div class="md:col-span-3 py-2 flex items-center justify-center">
							<div class="h-8 w-px bg-neutral-700"></div>
							<span class="mx-4 text-xs text-neutral-500 uppercase tracking-widest border border-neutral-800 px-3 py-1 rounded-full">Syscall Interface</span>
							<div class="h-8 w-px bg-neutral-700"></div>
						</div>
						
						<!-- Kernel Space -->
						<div class="md:col-span-3 bg-red-900/10 border border-red-900/30 rounded-xl p-6 relative group">
							<div class="absolute -top-3 left-1/2 -translate-x-1/2 bg-black px-3 text-red-500 text-sm font-bold tracking-widest uppercase">Kernel Space</div>
							
							<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-2">
								<div class="bg-black/50 border border-neutral-800 p-4 rounded-lg text-center hover:border-red-500/50 transition-colors cursor-default">
									<div class="text-red-400 mb-1">Memory Manager</div>
									<div class="text-xs text-gray-500">Paging, Heap</div>
								</div>
								<div class="bg-black/50 border border-neutral-800 p-4 rounded-lg text-center hover:border-red-500/50 transition-colors cursor-default">
									<div class="text-red-400 mb-1">Process Manager</div>
									<div class="text-xs text-gray-500">Scheduling, Tasks</div>
								</div>
								<div class="bg-black/50 border border-neutral-800 p-4 rounded-lg text-center hover:border-red-500/50 transition-colors cursor-default">
									<div class="text-red-400 mb-1">VFS</div>
									<div class="text-xs text-gray-500">File Systems</div>
								</div>
								<div class="bg-black/50 border border-neutral-800 p-4 rounded-lg text-center hover:border-red-500/50 transition-colors cursor-default">
									<div class="text-red-400 mb-1">Network Stack</div>
									<div class="text-xs text-gray-500">TCP/IP, Ethernet</div>
								</div>
							</div>
						</div>
						
						<!-- Hardware Abstraction -->
						<div class="md:col-span-3 py-2 flex items-center justify-center">
							<div class="h-8 w-px bg-neutral-700"></div>
							<div class="h-8 w-px bg-neutral-700 ml-1"></div>
							<div class="h-8 w-px bg-neutral-700 ml-1"></div>
						</div>
						
						<!-- Hardware -->
						<div class="md:col-span-3 bg-neutral-900/80 border-t-4 border-neutral-700 rounded-b-xl p-6 text-center">
							<h3 class="text-lg font-bold text-gray-500">Hardware (x86_64)</h3>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- Script for Terminal Interaction -->
		<script>
			const input = document.getElementById('terminal-input') as HTMLInputElement;
			const history = document.getElementById('terminal-history');
			const content = document.getElementById('terminal-content');

			if (input && history) {
				const commands: Record<string, string> = {
					'help': 'Available commands: help, version, about, clear, ls',
					'version': 'Rustrial OS v0.1.0-alpha',
					'about': 'Rustrial OS is a hobby operating system written in Rust.',
					'ls': 'boot/  home/  usr/  bin/  etc/  var/',
					'clear': ''
				};

				input.addEventListener('keydown', (e) => {
					if (e.key === 'Enter') {
						const cmd = input.value.trim().toLowerCase();
						
						// Add input to history
						const cmdLine = document.createElement('div');
						cmdLine.className = 'mb-1';
						cmdLine.innerHTML = `<span class="text-green-400">➜</span> <span class="text-blue-400">~</span> <span class="text-white">${input.value}</span>`;
						history.appendChild(cmdLine);

						// Process command
						if (cmd === 'clear') {
							history.innerHTML = '';
						} else if (cmd) {
							const response = commands[cmd] || `command not found: ${cmd}`;
							const respLine = document.createElement('div');
							respLine.className = 'mb-4 text-gray-300';
							respLine.textContent = response;
							history.appendChild(respLine);
						}

						input.value = '';
						// Scroll to bottom
						if (content) content.scrollTop = content.scrollHeight;
					}
				});
				
				// Focus input when clicking anywhere in terminal
				content?.addEventListener('click', () => {
					input.focus();
				});
			}
		</script>
		
		<!-- Footer -->
		<footer class="w-full border-t border-white/10 py-12 mt-auto">
			<div class="max-w-7xl mx-auto px-6 grid grid-cols-1 md:grid-cols-4 gap-12">
				<div class="col-span-1 md:col-span-2">
					<div class="flex items-center mb-6">
						<img src="/rustrial-logo.png" alt="Logo" class="h-8 w-auto mr-3" />
						<span class="text-xl font-bold">RUSTRIAL OS</span>
					</div>
					<p class="text-gray-500 max-w-sm">
						An educational operating system project exploring the boundaries of safe systems programming with Rust.
					</p>
				</div>
				
				<div>
					<h4 class="font-bold mb-6 text-white">Resources</h4>
					<ul class="space-y-4 text-gray-500">
						<li><a href="#" class="hover:text-red-500 transition-colors">Documentation</a></li>
						<li><a href="#" class="hover:text-red-500 transition-colors">Architecture</a></li>
						<li><a href="#" class="hover:text-red-500 transition-colors">API Reference</a></li>
					</ul>
				</div>
				
				<div>
					<h4 class="font-bold mb-6 text-white">Project</h4>
					<ul class="space-y-4 text-gray-500">
						<li><a href="https://github.com/lazzerex/rustrial-os" class="hover:text-red-500 transition-colors">GitHub</a></li>
						<li><a href="#" class="hover:text-red-500 transition-colors">License</a></li>
						<li><a href="#" class="hover:text-red-500 transition-colors">Contributing</a></li>
					</ul>
				</div>
			</div>
			<div class="max-w-7xl mx-auto px-6 pt-12 mt-12 border-t border-white/5 text-center text-gray-600 text-sm">
				© {new Date().getFullYear()} Rustrial OS Project. MIT License.
			</div>
		</footer>

	</main>
</Layout>

<style>
	.animate-marquee {
		animation: marquee 30s linear infinite;
	}
	
	@keyframes marquee {
		0% { transform: translateX(0); }
		100% { transform: translateX(-100%); }
	}

	.animate-fade-in-down {
		animation: fadeInDown 1s ease-out forwards;
	}
	
	.animate-fade-in-up {
		animation: fadeInUp 1s ease-out forwards;
		opacity: 0;
	}
	
	.animation-delay-200 {
		animation-delay: 0.2s;
	}
	
	.animation-delay-400 {
		animation-delay: 0.4s;
	}

	@keyframes fadeInDown {
		from {
			opacity: 0;
			transform: translateY(-20px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}
	
	@keyframes fadeInUp {
		from {
			opacity: 0;
			transform: translateY(20px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}
</style>
